<!--
  author: abhishek goswami (hiro)
  abhishekg785@gmail.com

  channel_view.html
  the page is used to connect a user to a particular available channels
-->
<html>
	<head>
		<title>Schmooze:<%= channelName %></title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="/css/main.css" />
	</head>
  <body>
		<% include messageView.html %>
    <section id = 'chatArea'>
			<div id = 'chatHeading'>Welcome to the channel "<%= channelName %>" : <%= channelDescription %></div>
			<div id = 'chatDisplay'>
			</div>
    </section>
    <section id = 'onlineUserArea'>
			<div id = 'onlineUserHead'>Online Users</div>
			<div id = 'usersDisplay'></div>
    </section>
    <section id = 'channelArea'>
			<div id = 'channelHeading'>
				<h2><%= username %></h2>
			</div>
			<div id = 'channelDisplay'>
				<span id = 'channelListHeading'>Available Channels</span>
				<div id = 'channelList'>
				</div>
				<span><a href = '/logout'>Logout</a></span>
				<span id = 'messageSpan' onclick="privateMessageHandlerFunctions.showMessageViewToDisplayMessages()">Messages</span>
			</div>
    </section>
    <input id = 'messageText' type = 'text' placeholder="Type Message here..."/>
		<div id = 'sendMessage'>Send</div>
    <input type="hidden" value = "<%= channelName %>" id = 'channelName' />
  </body>
  <% include footer.html %>
	<script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
	<script>
	  var channelName = "<%= channelName %>";
		function socketConnect(channelName){
			return io('localhost:3000', {
				query : 'channelName=' + channelName
			});
		};
		var socket = socketConnect(channelName);
	</script>
	<script src = '/js/privateMessageHandler.js'></script>
  <script src = "/js/channel/channel.js"></script>
	<script>
	  var channelListHeading = $('#channelListHeading'),
		    channelList = $('#channelList');
	  channelListHeading.click(function(){
			channelList.toggle(function(){
				channelList.css('height', '40%');
			});
		});
	</script>
</html>
